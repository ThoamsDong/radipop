\hypertarget{namespacerun__app}{}\doxysection{run\+\_\+app Namespace Reference}
\label{namespacerun__app}\index{run\_app@{run\_app}}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
def \mbox{\hyperlink{namespacerun__app_afdb401a0e8df645275ecda1abc1cb12d}{correct\+Partition}} ()
\begin{DoxyCompactList}\small\item\em Reveives index to slice/mask + coordinates-\/-\/\texorpdfstring{$>$}{>} returns partion corrected mask as PNG to client. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespacerun__app_a22b3b9a8813b7910f3c2ed59de6c3537}{draw\+On\+Mask}} ()
\begin{DoxyCompactList}\small\item\em Reveives index to slice/mask + x,y coordinates -\/-\/\texorpdfstring{$>$}{>} returns drawn on mask as PNG to client. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespacerun__app_af5d2f0f57ab0028c38e4c69565b038dd}{extend\+Thresholds}} ()
\begin{DoxyCompactList}\small\item\em Reveives index to slice mask + label id -\/-\/\texorpdfstring{$>$}{>} returns highlighted mask as PNG to client. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespacerun__app_a8d0fb577bb646075b2afa66f96fc5624}{get\+Mask}} ()
\begin{DoxyCompactList}\small\item\em Reveives index to slice/mask -\/-\/\texorpdfstring{$>$}{>} returns mask stored on flask server as PNG to client. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespacerun__app_ab3b2b115c54ccc114102a2e1daccbf60}{highlight\+Organ}} ()
\begin{DoxyCompactList}\small\item\em Reveives index of slice + x,y coordinates -\/-\/\texorpdfstring{$>$}{>} returns highlighted mask as PNG to client. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespacerun__app_a671d75ef168c9d7d956b3305d70c8305}{initialize}} ()
\begin{DoxyCompactList}\small\item\em Receive Paths to ordered slices, caches slices. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespacerun__app_a276cb2ba65919810402b673036a7ac0f}{label\+Organ}} ()
\begin{DoxyCompactList}\small\item\em Reveives index to slice mask + label id -\/-\/\texorpdfstring{$>$}{>} returns highlighted mask as PNG to client. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespacerun__app_a1736fbc7633e27d2eb51e195142783a4}{post\+Pickle\+Get\+Mask}} ()
\begin{DoxyCompactList}\small\item\em Receives path to pickle file -\/-\/\texorpdfstring{$>$}{>} returns mask as PNG to client. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespacerun__app_a0f3a74e5d4fcfcff61d7c57dfca1317e}{save\+Masks}} ()
\begin{DoxyCompactList}\small\item\em Reveives path, saves all stored masks as pickle files to path -\/-\/\texorpdfstring{$>$}{>} returns output path. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespacerun__app_a397413629ed9cfba6137f89bf17cac27}{update\+Mask}} ()
\begin{DoxyCompactList}\small\item\em Receives index of slice + slider values -\/-\/\texorpdfstring{$>$}{>} returns updated mask as PNG to client. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacerun__app_afe63fea7be31b0200b496d08bc6b517d}{app}} = Flask(\+\_\+\+\_\+name\+\_\+\+\_\+)
\item 
int \mbox{\hyperlink{namespacerun__app_a4cd10e2374b9aa7ea8f2257f38c46832}{FLASK\+\_\+\+PORT}} = 4041
\item 
string \mbox{\hyperlink{namespacerun__app_a8351ace7b9efb5281c356be0ff739d2d}{FLAST\+\_\+\+HOST}} = \textquotesingle{}0.\+0.\+0.\+0\textquotesingle{}
\item 
\mbox{\hyperlink{namespacerun__app_a832ddc04754e8a43d4f3c6165b1294a7}{host}}
\item 
dictionary \mbox{\hyperlink{namespacerun__app_a65db06fedda325a1c6119e2e8ef4a558}{patients}} = \{\}
\begin{DoxyCompactList}\small\item\em Dictionary which will hold for each patient\+ID a Radi\+Pop\+GUI object. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespacerun__app_af8fb0f45ee0195c7422a49e6a8d72369}{port}}
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{namespacerun__app_afdb401a0e8df645275ecda1abc1cb12d}\label{namespacerun__app_afdb401a0e8df645275ecda1abc1cb12d}} 
\index{run\_app@{run\_app}!correctPartition@{correctPartition}}
\index{correctPartition@{correctPartition}!run\_app@{run\_app}}
\doxysubsubsection{\texorpdfstring{correctPartition()}{correctPartition()}}
{\footnotesize\ttfamily def run\+\_\+app.\+correct\+Partition (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Reveives index to slice/mask + coordinates-\/-\/\texorpdfstring{$>$}{>} returns partion corrected mask as PNG to client. 


\begin{DoxyParams}{Parameters}
{\em patient\+ID} & The ID of the patient \\
\hline
{\em index} & The index of the slice for which to mask should be updated \\
\hline
{\em coordinates} & array of coordinates of the form \mbox{[}x0,y0,x1,y1,...,xn,yn\mbox{]}\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
JSON\+: \{mask\+: byte stream\} mask as transparent PNG as byte stream
\end{DoxyReturn}
Note\+: The coordinates array will be used to generate a line that cuts/divides the segmented organs.

Example handling of return image stream in js\+: \begin{DoxyVerb}fetch(RadiPOP_states.FLASK_SERVER+"/labelOrgan", {
    method: 'POST',
    headers: { 'Content-Type': 'application/json'},
    body: JSON.stringify(data)
})
.then(function(response){ return response.json();})   
.then(function(data){                      
bytestring = data["mask"];
img = bytestring.split('\'')[1]
\end{DoxyVerb}
 \mbox{\Hypertarget{namespacerun__app_a22b3b9a8813b7910f3c2ed59de6c3537}\label{namespacerun__app_a22b3b9a8813b7910f3c2ed59de6c3537}} 
\index{run\_app@{run\_app}!drawOnMask@{drawOnMask}}
\index{drawOnMask@{drawOnMask}!run\_app@{run\_app}}
\doxysubsubsection{\texorpdfstring{drawOnMask()}{drawOnMask()}}
{\footnotesize\ttfamily def run\+\_\+app.\+draw\+On\+Mask (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Reveives index to slice/mask + x,y coordinates -\/-\/\texorpdfstring{$>$}{>} returns drawn on mask as PNG to client. 


\begin{DoxyParams}{Parameters}
{\em patient\+ID} & The ID of the patient \\
\hline
{\em index} & The index of the slice for which to mask should be updated \\
\hline
{\em coordinates} & array of coordinates of the form \mbox{[}x0,y0,x1,y1,...,xn,yn\mbox{]}\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
JSON\+: \{mask\+: byte stream\} mask as transparent PNG as byte stream
\end{DoxyReturn}
Note\+: The coordinates array will be used to draw a line on the mask.

Example handling of return image stream in js\+: \begin{DoxyVerb}fetch(RadiPOP_states.FLASK_SERVER+"/labelOrgan", {
    method: 'POST',
    headers: { 'Content-Type': 'application/json'},
    body: JSON.stringify(data)
})
.then(function(response){ return response.json();})   
.then(function(data){                      
bytestring = data["mask"];
img = bytestring.split('\'')[1]
\end{DoxyVerb}
 \mbox{\Hypertarget{namespacerun__app_af5d2f0f57ab0028c38e4c69565b038dd}\label{namespacerun__app_af5d2f0f57ab0028c38e4c69565b038dd}} 
\index{run\_app@{run\_app}!extendThresholds@{extendThresholds}}
\index{extendThresholds@{extendThresholds}!run\_app@{run\_app}}
\doxysubsubsection{\texorpdfstring{extendThresholds()}{extendThresholds()}}
{\footnotesize\ttfamily def run\+\_\+app.\+extend\+Thresholds (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Reveives index to slice mask + label id -\/-\/\texorpdfstring{$>$}{>} returns highlighted mask as PNG to client. 


\begin{DoxyParams}{Parameters}
{\em patient\+ID} & The ID of the patient \\
\hline
{\em index} & The index of the slice for which to mask should be updated \\
\hline
{\em left} & Extend labeling up to index-\/label \\
\hline
{\em right} & Extend labeling up to index+label\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
JSON\+: \{left\+\_\+most\+\_\+idx\+: idx, right\+\_\+most\+\_\+idx\+: idx\}
\end{DoxyReturn}
Note\+: The left\+\_\+most\+\_\+idx and right\+\_\+most\+\_\+idx correspond to the indices of the slices up to which the labeling has been extended. After the the function has finished use the function API\textquotesingle{}s function /get\+Mask to update the masks in your GUI. Example in js\+: \begin{DoxyVerb}for (let index=parseInt(data["left_most_idx"]); index<parseInt(data["right_most_idx"])+1; index++) {     
    $.post(FLASK_SERVER+"/getMask", {
        javascript_data: JSON.stringify({patienID: id, index: idx})
    })
}
\end{DoxyVerb}
 \mbox{\Hypertarget{namespacerun__app_a8d0fb577bb646075b2afa66f96fc5624}\label{namespacerun__app_a8d0fb577bb646075b2afa66f96fc5624}} 
\index{run\_app@{run\_app}!getMask@{getMask}}
\index{getMask@{getMask}!run\_app@{run\_app}}
\doxysubsubsection{\texorpdfstring{getMask()}{getMask()}}
{\footnotesize\ttfamily def run\+\_\+app.\+get\+Mask (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Reveives index to slice/mask -\/-\/\texorpdfstring{$>$}{>} returns mask stored on flask server as PNG to client. 


\begin{DoxyParams}{Parameters}
{\em patient\+ID} & The ID of the patient \\
\hline
{\em index} & The index of the slice for which to mask should be updated\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
JSON\+: \{mask\+: byte stream\} mask as transparent PNG as byte stream
\end{DoxyReturn}
Example handling of return image stream in js\+: \begin{DoxyVerb}fetch(RadiPOP_states.FLASK_SERVER+"/labelOrgan", {
    method: 'POST',
    headers: { 'Content-Type': 'application/json'},
    body: JSON.stringify(data)
})
.then(function(response){ return response.json();})   
.then(function(data){                      
bytestring = data["mask"];
img = bytestring.split('\'')[1]
\end{DoxyVerb}
 \mbox{\Hypertarget{namespacerun__app_ab3b2b115c54ccc114102a2e1daccbf60}\label{namespacerun__app_ab3b2b115c54ccc114102a2e1daccbf60}} 
\index{run\_app@{run\_app}!highlightOrgan@{highlightOrgan}}
\index{highlightOrgan@{highlightOrgan}!run\_app@{run\_app}}
\doxysubsubsection{\texorpdfstring{highlightOrgan()}{highlightOrgan()}}
{\footnotesize\ttfamily def run\+\_\+app.\+highlight\+Organ (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Reveives index of slice + x,y coordinates -\/-\/\texorpdfstring{$>$}{>} returns highlighted mask as PNG to client. 


\begin{DoxyParams}{Parameters}
{\em patient\+ID} & The ID of the patient \\
\hline
{\em index} & The index of the slice for which to mask should be updated \\
\hline
{\em x} & relative x coordinates (0\texorpdfstring{$<$}{<}=x\texorpdfstring{$<$}{<}=1) \\
\hline
{\em y} & relative y coordinates (0\texorpdfstring{$<$}{<}=y\texorpdfstring{$<$}{<}=1)\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
JSON\+: \{mask\+: byte stream\} mask as transparent PNG as byte stream
\end{DoxyReturn}
Example handling of return image stream in js\+: \begin{DoxyVerb}fetch(RadiPOP_states.FLASK_SERVER+"/labelOrgan", {
    method: 'POST',
    headers: { 'Content-Type': 'application/json'},
    body: JSON.stringify(data)
})
.then(function(response){ return response.json();})   
.then(function(data){                      
bytestring = data["mask"];
img = bytestring.split('\'')[1]
\end{DoxyVerb}
 \mbox{\Hypertarget{namespacerun__app_a671d75ef168c9d7d956b3305d70c8305}\label{namespacerun__app_a671d75ef168c9d7d956b3305d70c8305}} 
\index{run\_app@{run\_app}!initialize@{initialize}}
\index{initialize@{initialize}!run\_app@{run\_app}}
\doxysubsubsection{\texorpdfstring{initialize()}{initialize()}}
{\footnotesize\ttfamily def run\+\_\+app.\+initialize (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Receive Paths to ordered slices, caches slices. 


\begin{DoxyParams}{Parameters}
{\em patient\+ID} & The ID of the patient. Must be unique! \\
\hline
{\em paths} & An array with the paths to the slices\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
JSON\+: \{message\+: message\}
\end{DoxyReturn}
Note\+: Paths to slices !!!\+MUST BE ORDERED!!! 0,1,..,n \mbox{\Hypertarget{namespacerun__app_a276cb2ba65919810402b673036a7ac0f}\label{namespacerun__app_a276cb2ba65919810402b673036a7ac0f}} 
\index{run\_app@{run\_app}!labelOrgan@{labelOrgan}}
\index{labelOrgan@{labelOrgan}!run\_app@{run\_app}}
\doxysubsubsection{\texorpdfstring{labelOrgan()}{labelOrgan()}}
{\footnotesize\ttfamily def run\+\_\+app.\+label\+Organ (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Reveives index to slice mask + label id -\/-\/\texorpdfstring{$>$}{>} returns highlighted mask as PNG to client. 


\begin{DoxyParams}{Parameters}
{\em patient\+ID} & The ID of the patient \\
\hline
{\em index} & The index of the slice for which to mask should be updated \\
\hline
{\em label} & Label of organ (1 for liver, 2 for spleen, 0 nothing, \texorpdfstring{$>$}{>}2 other organ)\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
JSON\+: \{mask\+: byte stream\} mask as transparent PNG as byte stream
\end{DoxyReturn}
Example handling of return image stream in js\+: \begin{DoxyVerb}fetch(RadiPOP_states.FLASK_SERVER+"/labelOrgan", {
    method: 'POST',
    headers: { 'Content-Type': 'application/json'},
    body: JSON.stringify(data)
})
.then(function(response){ return response.json();})   
.then(function(data){                      
bytestring = data["mask"];
img = bytestring.split('\'')[1]
\end{DoxyVerb}
 \mbox{\Hypertarget{namespacerun__app_a1736fbc7633e27d2eb51e195142783a4}\label{namespacerun__app_a1736fbc7633e27d2eb51e195142783a4}} 
\index{run\_app@{run\_app}!postPickleGetMask@{postPickleGetMask}}
\index{postPickleGetMask@{postPickleGetMask}!run\_app@{run\_app}}
\doxysubsubsection{\texorpdfstring{postPickleGetMask()}{postPickleGetMask()}}
{\footnotesize\ttfamily def run\+\_\+app.\+post\+Pickle\+Get\+Mask (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Receives path to pickle file -\/-\/\texorpdfstring{$>$}{>} returns mask as PNG to client. 


\begin{DoxyParams}{Parameters}
{\em patient\+ID} & The ID of the patient \\
\hline
{\em index} & The index of the slice the mask refers to \\
\hline
{\em path} & The path to the mask file\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
JSON\+: \{mask\+: byte stream\} mask as transparent PNG as byte stream
\end{DoxyReturn}
Example handling of return image stream in js\+: \begin{DoxyVerb}fetch(RadiPOP_states.FLASK_SERVER+"/labelOrgan", {
    method: 'POST',
    headers: { 'Content-Type': 'application/json'},
    body: JSON.stringify(data)
})
.then(function(response){ return response.json();})   
.then(function(data){                      
bytestring = data["mask"];
img = bytestring.split('\'')[1]
\end{DoxyVerb}
 \mbox{\Hypertarget{namespacerun__app_a0f3a74e5d4fcfcff61d7c57dfca1317e}\label{namespacerun__app_a0f3a74e5d4fcfcff61d7c57dfca1317e}} 
\index{run\_app@{run\_app}!saveMasks@{saveMasks}}
\index{saveMasks@{saveMasks}!run\_app@{run\_app}}
\doxysubsubsection{\texorpdfstring{saveMasks()}{saveMasks()}}
{\footnotesize\ttfamily def run\+\_\+app.\+save\+Masks (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Reveives path, saves all stored masks as pickle files to path -\/-\/\texorpdfstring{$>$}{>} returns output path. 


\begin{DoxyParams}{Parameters}
{\em patient\+ID} & The ID of the patient \\
\hline
{\em index} & The index of the slice for which to mask should be updated\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
JSON\+: \{outdir\+: path\} path/directory to which the pickle files were written ~\newline
 
\end{DoxyReturn}
\mbox{\Hypertarget{namespacerun__app_a397413629ed9cfba6137f89bf17cac27}\label{namespacerun__app_a397413629ed9cfba6137f89bf17cac27}} 
\index{run\_app@{run\_app}!updateMask@{updateMask}}
\index{updateMask@{updateMask}!run\_app@{run\_app}}
\doxysubsubsection{\texorpdfstring{updateMask()}{updateMask()}}
{\footnotesize\ttfamily def run\+\_\+app.\+update\+Mask (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Receives index of slice + slider values -\/-\/\texorpdfstring{$>$}{>} returns updated mask as PNG to client. 


\begin{DoxyParams}{Parameters}
{\em patient\+ID} & The ID of the patient \\
\hline
{\em index} & The index of the slice for which to mask should be updated \\
\hline
{\em liver-\/intensity-\/slider} & Slider value for liver intesity \\
\hline
{\em bone-\/intensity-\/slider} & Slider value for bone intesity \\
\hline
{\em blood-\/vessel-\/intensity-\/slider} & Slider value for blood-\/vessel intesity\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
JSON\+: \{mask\+: byte stream\} mask as transparent PNG as byte stream
\end{DoxyReturn}
Example handling of return image stream in js\+: \begin{DoxyVerb}fetch(RadiPOP_states.FLASK_SERVER+"/labelOrgan", {
    method: 'POST',
    headers: { 'Content-Type': 'application/json'},
    body: JSON.stringify(data)
})
.then(function(response){ return response.json();})   
.then(function(data){                      
bytestring = data["mask"];
img = bytestring.split('\'')[1]
\end{DoxyVerb}
 

\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{namespacerun__app_afe63fea7be31b0200b496d08bc6b517d}\label{namespacerun__app_afe63fea7be31b0200b496d08bc6b517d}} 
\index{run\_app@{run\_app}!app@{app}}
\index{app@{app}!run\_app@{run\_app}}
\doxysubsubsection{\texorpdfstring{app}{app}}
{\footnotesize\ttfamily app = Flask(\+\_\+\+\_\+name\+\_\+\+\_\+)}

\mbox{\Hypertarget{namespacerun__app_a4cd10e2374b9aa7ea8f2257f38c46832}\label{namespacerun__app_a4cd10e2374b9aa7ea8f2257f38c46832}} 
\index{run\_app@{run\_app}!FLASK\_PORT@{FLASK\_PORT}}
\index{FLASK\_PORT@{FLASK\_PORT}!run\_app@{run\_app}}
\doxysubsubsection{\texorpdfstring{FLASK\_PORT}{FLASK\_PORT}}
{\footnotesize\ttfamily int FLASK\+\_\+\+PORT = 4041}

\mbox{\Hypertarget{namespacerun__app_a8351ace7b9efb5281c356be0ff739d2d}\label{namespacerun__app_a8351ace7b9efb5281c356be0ff739d2d}} 
\index{run\_app@{run\_app}!FLAST\_HOST@{FLAST\_HOST}}
\index{FLAST\_HOST@{FLAST\_HOST}!run\_app@{run\_app}}
\doxysubsubsection{\texorpdfstring{FLAST\_HOST}{FLAST\_HOST}}
{\footnotesize\ttfamily FLAST\+\_\+\+HOST = \textquotesingle{}0.\+0.\+0.\+0\textquotesingle{}}

\mbox{\Hypertarget{namespacerun__app_a832ddc04754e8a43d4f3c6165b1294a7}\label{namespacerun__app_a832ddc04754e8a43d4f3c6165b1294a7}} 
\index{run\_app@{run\_app}!host@{host}}
\index{host@{host}!run\_app@{run\_app}}
\doxysubsubsection{\texorpdfstring{host}{host}}
{\footnotesize\ttfamily host}

\mbox{\Hypertarget{namespacerun__app_a65db06fedda325a1c6119e2e8ef4a558}\label{namespacerun__app_a65db06fedda325a1c6119e2e8ef4a558}} 
\index{run\_app@{run\_app}!patients@{patients}}
\index{patients@{patients}!run\_app@{run\_app}}
\doxysubsubsection{\texorpdfstring{patients}{patients}}
{\footnotesize\ttfamily dictionary patients = \{\}}



Dictionary which will hold for each patient\+ID a Radi\+Pop\+GUI object. 

Patients are added by the API\textquotesingle{}s /initialize function \mbox{\Hypertarget{namespacerun__app_af8fb0f45ee0195c7422a49e6a8d72369}\label{namespacerun__app_af8fb0f45ee0195c7422a49e6a8d72369}} 
\index{run\_app@{run\_app}!port@{port}}
\index{port@{port}!run\_app@{run\_app}}
\doxysubsubsection{\texorpdfstring{port}{port}}
{\footnotesize\ttfamily port}

