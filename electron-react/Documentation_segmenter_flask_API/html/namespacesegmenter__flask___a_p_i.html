<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RadiPOP_API: segmenter_flask_API Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RadiPOP_API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">segmenter_flask_API Namespace Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Flask server for RadiPOP segmenter: Bridge between frontend and backend.  
<a href="namespacesegmenter__flask___a_p_i.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a87eb1f0c3f92490595980a5fa2d5231a"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesegmenter__flask___a_p_i.html#a87eb1f0c3f92490595980a5fa2d5231a">correctPartition</a> ()</td></tr>
<tr class="memdesc:a87eb1f0c3f92490595980a5fa2d5231a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reveives index to slice/mask + coordinates--&gt; returns partion corrected mask as PNG to client.  <a href="namespacesegmenter__flask___a_p_i.html#a87eb1f0c3f92490595980a5fa2d5231a">More...</a><br /></td></tr>
<tr class="separator:a87eb1f0c3f92490595980a5fa2d5231a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1085fa447800af4e234c6b8c91013574"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesegmenter__flask___a_p_i.html#a1085fa447800af4e234c6b8c91013574">dcm2png</a> ()</td></tr>
<tr class="memdesc:a1085fa447800af4e234c6b8c91013574"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive Paths to dcm files, converts them to PNG.  <a href="namespacesegmenter__flask___a_p_i.html#a1085fa447800af4e234c6b8c91013574">More...</a><br /></td></tr>
<tr class="separator:a1085fa447800af4e234c6b8c91013574"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b907cefd2476cd532a2ed1f06d09ffa"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesegmenter__flask___a_p_i.html#a0b907cefd2476cd532a2ed1f06d09ffa">dcm2pngPreview</a> ()</td></tr>
<tr class="memdesc:a0b907cefd2476cd532a2ed1f06d09ffa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive Paths to dcm file, converts it to PNG.  <a href="namespacesegmenter__flask___a_p_i.html#a0b907cefd2476cd532a2ed1f06d09ffa">More...</a><br /></td></tr>
<tr class="separator:a0b907cefd2476cd532a2ed1f06d09ffa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ea3e26521cdcd63a5ec21e6a4dcb0e6"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesegmenter__flask___a_p_i.html#a2ea3e26521cdcd63a5ec21e6a4dcb0e6">drawOnMask</a> ()</td></tr>
<tr class="memdesc:a2ea3e26521cdcd63a5ec21e6a4dcb0e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reveives index to slice/mask + x,y coordinates --&gt; returns drawn on mask as PNG to client.  <a href="namespacesegmenter__flask___a_p_i.html#a2ea3e26521cdcd63a5ec21e6a4dcb0e6">More...</a><br /></td></tr>
<tr class="separator:a2ea3e26521cdcd63a5ec21e6a4dcb0e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab78dfd12fd33aa268d51178dd6d5baac"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesegmenter__flask___a_p_i.html#ab78dfd12fd33aa268d51178dd6d5baac">extendLabels</a> ()</td></tr>
<tr class="memdesc:ab78dfd12fd33aa268d51178dd6d5baac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reveives index to slice mask + label id --&gt; returns highlighted mask as PNG to client.  <a href="namespacesegmenter__flask___a_p_i.html#ab78dfd12fd33aa268d51178dd6d5baac">More...</a><br /></td></tr>
<tr class="separator:ab78dfd12fd33aa268d51178dd6d5baac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a863cdb180347d6f9df75d65d2177a21d"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesegmenter__flask___a_p_i.html#a863cdb180347d6f9df75d65d2177a21d">getMask</a> ()</td></tr>
<tr class="memdesc:a863cdb180347d6f9df75d65d2177a21d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reveives index to slice/mask --&gt; returns mask stored on flask server as PNG to client.  <a href="namespacesegmenter__flask___a_p_i.html#a863cdb180347d6f9df75d65d2177a21d">More...</a><br /></td></tr>
<tr class="separator:a863cdb180347d6f9df75d65d2177a21d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0006a4c42fd99e22d35951538773ebe1"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesegmenter__flask___a_p_i.html#a0006a4c42fd99e22d35951538773ebe1">highlightOrgan</a> ()</td></tr>
<tr class="memdesc:a0006a4c42fd99e22d35951538773ebe1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reveives index of slice + x,y coordinates --&gt; returns highlighted mask as PNG to client.  <a href="namespacesegmenter__flask___a_p_i.html#a0006a4c42fd99e22d35951538773ebe1">More...</a><br /></td></tr>
<tr class="separator:a0006a4c42fd99e22d35951538773ebe1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab65dca150eed5dc1acea909ec05e32ff"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesegmenter__flask___a_p_i.html#ab65dca150eed5dc1acea909ec05e32ff">initialize</a> ()</td></tr>
<tr class="memdesc:ab65dca150eed5dc1acea909ec05e32ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive Paths to ordered slices, caches slices.  <a href="namespacesegmenter__flask___a_p_i.html#ab65dca150eed5dc1acea909ec05e32ff">More...</a><br /></td></tr>
<tr class="separator:ab65dca150eed5dc1acea909ec05e32ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12420f8d23105637cf31e672ff0be50d"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesegmenter__flask___a_p_i.html#a12420f8d23105637cf31e672ff0be50d">labelOrgan</a> ()</td></tr>
<tr class="memdesc:a12420f8d23105637cf31e672ff0be50d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reveives index to slice mask + label id --&gt; returns highlighted mask as PNG to client.  <a href="namespacesegmenter__flask___a_p_i.html#a12420f8d23105637cf31e672ff0be50d">More...</a><br /></td></tr>
<tr class="separator:a12420f8d23105637cf31e672ff0be50d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11ad2719228192cff4727e61aab43fb5"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesegmenter__flask___a_p_i.html#a11ad2719228192cff4727e61aab43fb5">postPickleGetMask</a> ()</td></tr>
<tr class="memdesc:a11ad2719228192cff4727e61aab43fb5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receives path to pickle file --&gt; returns mask as PNG to client.  <a href="namespacesegmenter__flask___a_p_i.html#a11ad2719228192cff4727e61aab43fb5">More...</a><br /></td></tr>
<tr class="separator:a11ad2719228192cff4727e61aab43fb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c6ecae23f9e433d8fc1de7448fc29b9"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesegmenter__flask___a_p_i.html#a1c6ecae23f9e433d8fc1de7448fc29b9">saveMasks</a> ()</td></tr>
<tr class="memdesc:a1c6ecae23f9e433d8fc1de7448fc29b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reveives path, saves all stored masks as pickle files to path --&gt; returns output path.  <a href="namespacesegmenter__flask___a_p_i.html#a1c6ecae23f9e433d8fc1de7448fc29b9">More...</a><br /></td></tr>
<tr class="separator:a1c6ecae23f9e433d8fc1de7448fc29b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb7150b7f1f5d3c763b845cbaaed3f47"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesegmenter__flask___a_p_i.html#acb7150b7f1f5d3c763b845cbaaed3f47">updateMask</a> ()</td></tr>
<tr class="memdesc:acb7150b7f1f5d3c763b845cbaaed3f47"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receives index of slice + slider values --&gt; returns updated mask as PNG to client.  <a href="namespacesegmenter__flask___a_p_i.html#acb7150b7f1f5d3c763b845cbaaed3f47">More...</a><br /></td></tr>
<tr class="separator:acb7150b7f1f5d3c763b845cbaaed3f47"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:afe63fea7be31b0200b496d08bc6b517d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesegmenter__flask___a_p_i.html#afe63fea7be31b0200b496d08bc6b517d">app</a> = Flask(__name__)</td></tr>
<tr class="separator:afe63fea7be31b0200b496d08bc6b517d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cd10e2374b9aa7ea8f2257f38c46832"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesegmenter__flask___a_p_i.html#a4cd10e2374b9aa7ea8f2257f38c46832">FLASK_PORT</a> = 4041</td></tr>
<tr class="separator:a4cd10e2374b9aa7ea8f2257f38c46832"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8351ace7b9efb5281c356be0ff739d2d"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesegmenter__flask___a_p_i.html#a8351ace7b9efb5281c356be0ff739d2d">FLAST_HOST</a> = '0.0.0.0'</td></tr>
<tr class="separator:a8351ace7b9efb5281c356be0ff739d2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a832ddc04754e8a43d4f3c6165b1294a7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesegmenter__flask___a_p_i.html#a832ddc04754e8a43d4f3c6165b1294a7">host</a></td></tr>
<tr class="separator:a832ddc04754e8a43d4f3c6165b1294a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65db06fedda325a1c6119e2e8ef4a558"><td class="memItemLeft" align="right" valign="top">dictionary&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesegmenter__flask___a_p_i.html#a65db06fedda325a1c6119e2e8ef4a558">patients</a> = {}</td></tr>
<tr class="memdesc:a65db06fedda325a1c6119e2e8ef4a558"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dictionary which will hold for each patientID a RadiPopGUI object.  <a href="namespacesegmenter__flask___a_p_i.html#a65db06fedda325a1c6119e2e8ef4a558">More...</a><br /></td></tr>
<tr class="separator:a65db06fedda325a1c6119e2e8ef4a558"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8fb0f45ee0195c7422a49e6a8d72369"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesegmenter__flask___a_p_i.html#af8fb0f45ee0195c7422a49e6a8d72369">port</a></td></tr>
<tr class="separator:af8fb0f45ee0195c7422a49e6a8d72369"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Flask server for RadiPOP segmenter: Bridge between frontend and backend. </p>
<h1><a class="anchor" id="description_segmenter_flask_API"></a>
Description</h1>
<p >Requests to the flask server follow the HTTP protocol. All requests should contain a JSON formated message as content. The reply from the Flask server is also always a JSON formatted string. The functions/routes of the flask server don't take any arguments in the classical sense, but expect their "arguments" to be provided in JSON format by the client's POST request. Since there is not better alternative, they appear as the function's parameter in the Doxygen documentation.</p>
<h1><a class="anchor" id="author_segmenter_flask_API"></a>
Author(s)</h1>
<ul>
<li>Created by Lorenz Perschy (2021, 2022) </li>
</ul>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a87eb1f0c3f92490595980a5fa2d5231a" name="a87eb1f0c3f92490595980a5fa2d5231a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87eb1f0c3f92490595980a5fa2d5231a">&#9670;&nbsp;</a></span>correctPartition()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def segmenter_flask_API.correctPartition </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reveives index to slice/mask + coordinates--&gt; returns partion corrected mask as PNG to client. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">patientID</td><td>The ID of the patient </td></tr>
    <tr><td class="paramname">index</td><td>The index of the slice for which to mask should be updated </td></tr>
    <tr><td class="paramname">coordinates</td><td>array of coordinates of the form [x0,y0,x1,y1,...,xn,yn]</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>JSON: {mask: byte stream} mask as transparent PNG as byte stream</dd></dl>
<p>Note: The coordinates array will be used to generate a line that cuts/divides the segmented organs.</p>
<p >Example handling of return image stream in js: </p><pre class="fragment">fetch(RadiPOP_states.FLASK_SERVER+"/labelOrgan", {
    method: 'POST',
    headers: { 'Content-Type': 'application/json'},
    body: JSON.stringify(data)
})
.then(function(response){ return response.json();})   
.then(function(data){                      
bytestring = data["mask"];
img = bytestring.split('\'')[1]
</pre> 
</div>
</div>
<a id="a1085fa447800af4e234c6b8c91013574" name="a1085fa447800af4e234c6b8c91013574"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1085fa447800af4e234c6b8c91013574">&#9670;&nbsp;</a></span>dcm2png()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def segmenter_flask_API.dcm2png </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receive Paths to dcm files, converts them to PNG. </p>
<p >Included metadata IDs: "PatientID","PatientBirthDate","PatientName", "PatientAge","PatientSex","PatientName","SliceThickness","StudyID","ContentDate"</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">paths</td><td>An array with the paths to the slices </td></tr>
    <tr><td class="paramname">low_clip</td><td>lowest pixel value (Recommended:850) </td></tr>
    <tr><td class="paramname">high_clip</td><td>highest pixel value (Recommended: 1250)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>JSON: {message: message, metadata: dictionary} </dd></dl>

</div>
</div>
<a id="a0b907cefd2476cd532a2ed1f06d09ffa" name="a0b907cefd2476cd532a2ed1f06d09ffa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b907cefd2476cd532a2ed1f06d09ffa">&#9670;&nbsp;</a></span>dcm2pngPreview()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def segmenter_flask_API.dcm2pngPreview </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receive Paths to dcm file, converts it to PNG. </p>
<p >Included metadata IDs: "PatientID","PatientBirthDate","PatientName", "PatientAge","PatientSex","PatientName","SliceThickness","StudyID","ContentDate"</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>The paths to the dcm file </td></tr>
    <tr><td class="paramname">low_clip</td><td>lowest pixel value (Recommended:850) </td></tr>
    <tr><td class="paramname">high_clip</td><td>highest pixel value (Recommended: 1250)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>JSON: {slice: slice stream} slice as PNG as byte stream </dd></dl>

</div>
</div>
<a id="a2ea3e26521cdcd63a5ec21e6a4dcb0e6" name="a2ea3e26521cdcd63a5ec21e6a4dcb0e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ea3e26521cdcd63a5ec21e6a4dcb0e6">&#9670;&nbsp;</a></span>drawOnMask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def segmenter_flask_API.drawOnMask </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reveives index to slice/mask + x,y coordinates --&gt; returns drawn on mask as PNG to client. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">patientID</td><td>The ID of the patient </td></tr>
    <tr><td class="paramname">index</td><td>The index of the slice for which to mask should be updated </td></tr>
    <tr><td class="paramname">coordinates</td><td>array of coordinates of the form [x0,y0,x1,y1,...,xn,yn]</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>JSON: {mask: byte stream} mask as transparent PNG as byte stream</dd></dl>
<p>Note: The coordinates array will be used to draw a line on the mask.</p>
<p >Example handling of return image stream in js: </p><pre class="fragment">fetch(RadiPOP_states.FLASK_SERVER+"/labelOrgan", {
    method: 'POST',
    headers: { 'Content-Type': 'application/json'},
    body: JSON.stringify(data)
})
.then(function(response){ return response.json();})   
.then(function(data){                      
bytestring = data["mask"];
img = bytestring.split('\'')[1]
</pre> 
</div>
</div>
<a id="ab78dfd12fd33aa268d51178dd6d5baac" name="ab78dfd12fd33aa268d51178dd6d5baac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab78dfd12fd33aa268d51178dd6d5baac">&#9670;&nbsp;</a></span>extendLabels()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def segmenter_flask_API.extendLabels </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reveives index to slice mask + label id --&gt; returns highlighted mask as PNG to client. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">patientID</td><td>The ID of the patient </td></tr>
    <tr><td class="paramname">index</td><td>The index of the slice for which to mask should be updated </td></tr>
    <tr><td class="paramname">left</td><td>Extend labeling up to index-left </td></tr>
    <tr><td class="paramname">right</td><td>Extend labeling up to index+right</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>JSON: {left_most_idx: idx, right_most_idx: idx}</dd></dl>
<p>Note: The left_most_idx and right_most_idx correspond to the indices of the slices up to which the labeling has been extended. After the the function has finished use the function API's function /getMask to update the masks in your GUI. Example in js: </p><pre class="fragment">for (let index=parseInt(data["left_most_idx"]); index&lt;parseInt(data["right_most_idx"])+1; index++) {     
    $.post(FLASK_SERVER+"/getMask", {
        javascript_data: JSON.stringify({patienID: id, index: idx})
    })
}
</pre> 
</div>
</div>
<a id="a863cdb180347d6f9df75d65d2177a21d" name="a863cdb180347d6f9df75d65d2177a21d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a863cdb180347d6f9df75d65d2177a21d">&#9670;&nbsp;</a></span>getMask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def segmenter_flask_API.getMask </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reveives index to slice/mask --&gt; returns mask stored on flask server as PNG to client. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">patientID</td><td>The ID of the patient </td></tr>
    <tr><td class="paramname">index</td><td>The index of the slice for which to mask should be updated</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>JSON: {mask: byte stream} mask as transparent PNG as byte stream</dd></dl>
<p>Example handling of return image stream in js: </p><pre class="fragment">fetch(RadiPOP_states.FLASK_SERVER+"/labelOrgan", {
    method: 'POST',
    headers: { 'Content-Type': 'application/json'},
    body: JSON.stringify(data)
})
.then(function(response){ return response.json();})   
.then(function(data){                      
bytestring = data["mask"];
img = bytestring.split('\'')[1]
</pre> 
</div>
</div>
<a id="a0006a4c42fd99e22d35951538773ebe1" name="a0006a4c42fd99e22d35951538773ebe1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0006a4c42fd99e22d35951538773ebe1">&#9670;&nbsp;</a></span>highlightOrgan()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def segmenter_flask_API.highlightOrgan </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reveives index of slice + x,y coordinates --&gt; returns highlighted mask as PNG to client. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">patientID</td><td>The ID of the patient </td></tr>
    <tr><td class="paramname">index</td><td>The index of the slice for which to mask should be updated </td></tr>
    <tr><td class="paramname">x</td><td>relative x coordinates (0&lt;=x&lt;=1) </td></tr>
    <tr><td class="paramname">y</td><td>relative y coordinates (0&lt;=y&lt;=1)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>JSON: {mask: byte stream} mask as transparent PNG as byte stream</dd></dl>
<p>Example handling of return image stream in js: </p><pre class="fragment">fetch(RadiPOP_states.FLASK_SERVER+"/labelOrgan", {
    method: 'POST',
    headers: { 'Content-Type': 'application/json'},
    body: JSON.stringify(data)
})
.then(function(response){ return response.json();})   
.then(function(data){                      
bytestring = data["mask"];
img = bytestring.split('\'')[1]
</pre> 
</div>
</div>
<a id="ab65dca150eed5dc1acea909ec05e32ff" name="ab65dca150eed5dc1acea909ec05e32ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab65dca150eed5dc1acea909ec05e32ff">&#9670;&nbsp;</a></span>initialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def segmenter_flask_API.initialize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receive Paths to ordered slices, caches slices. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">patientID</td><td>The ID of the patient. Must be unique! </td></tr>
    <tr><td class="paramname">paths</td><td>An array with the paths to the slices</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>JSON: {message: message}</dd></dl>
<p>Note: Paths to slices !!!MUST BE ORDERED!!! 0,1,..,n </p>

</div>
</div>
<a id="a12420f8d23105637cf31e672ff0be50d" name="a12420f8d23105637cf31e672ff0be50d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12420f8d23105637cf31e672ff0be50d">&#9670;&nbsp;</a></span>labelOrgan()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def segmenter_flask_API.labelOrgan </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reveives index to slice mask + label id --&gt; returns highlighted mask as PNG to client. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">patientID</td><td>The ID of the patient </td></tr>
    <tr><td class="paramname">index</td><td>The index of the slice for which to mask should be updated </td></tr>
    <tr><td class="paramname">label</td><td>Label of organ (1 for liver, 2 for spleen, 0 nothing, &gt;2 other organ)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>JSON: {mask: byte stream} mask as transparent PNG as byte stream</dd></dl>
<p>Example handling of return image stream in js: </p><pre class="fragment">fetch(RadiPOP_states.FLASK_SERVER+"/labelOrgan", {
    method: 'POST',
    headers: { 'Content-Type': 'application/json'},
    body: JSON.stringify(data)
})
.then(function(response){ return response.json();})   
.then(function(data){                      
bytestring = data["mask"];
img = bytestring.split('\'')[1]
</pre> 
</div>
</div>
<a id="a11ad2719228192cff4727e61aab43fb5" name="a11ad2719228192cff4727e61aab43fb5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11ad2719228192cff4727e61aab43fb5">&#9670;&nbsp;</a></span>postPickleGetMask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def segmenter_flask_API.postPickleGetMask </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receives path to pickle file --&gt; returns mask as PNG to client. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">patientID</td><td>The ID of the patient </td></tr>
    <tr><td class="paramname">index</td><td>The index of the slice the mask refers to </td></tr>
    <tr><td class="paramname">path</td><td>The path to the mask file</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>JSON: {mask: byte stream} mask as transparent PNG as byte stream</dd></dl>
<p>Example handling of return image stream in js: </p><pre class="fragment">fetch(RadiPOP_states.FLASK_SERVER+"/labelOrgan", {
    method: 'POST',
    headers: { 'Content-Type': 'application/json'},
    body: JSON.stringify(data)
})
.then(function(response){ return response.json();})   
.then(function(data){                      
bytestring = data["mask"];
img = bytestring.split('\'')[1]
</pre> 
</div>
</div>
<a id="a1c6ecae23f9e433d8fc1de7448fc29b9" name="a1c6ecae23f9e433d8fc1de7448fc29b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c6ecae23f9e433d8fc1de7448fc29b9">&#9670;&nbsp;</a></span>saveMasks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def segmenter_flask_API.saveMasks </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reveives path, saves all stored masks as pickle files to path --&gt; returns output path. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">patientID</td><td>The ID of the patient </td></tr>
    <tr><td class="paramname">index</td><td>The index of the slice for which to mask should be updated</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>JSON: {outdir: path} path/directory to which the pickle files were written <br  />
 </dd></dl>

</div>
</div>
<a id="acb7150b7f1f5d3c763b845cbaaed3f47" name="acb7150b7f1f5d3c763b845cbaaed3f47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb7150b7f1f5d3c763b845cbaaed3f47">&#9670;&nbsp;</a></span>updateMask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def segmenter_flask_API.updateMask </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receives index of slice + slider values --&gt; returns updated mask as PNG to client. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">patientID</td><td>The ID of the patient </td></tr>
    <tr><td class="paramname">index</td><td>The index of the slice for which to mask should be updated </td></tr>
    <tr><td class="paramname">liver-intensity-slider</td><td>Slider value for liver intesity </td></tr>
    <tr><td class="paramname">bone-intensity-slider</td><td>Slider value for bone intesity </td></tr>
    <tr><td class="paramname">blood-vessel-intensity-slider</td><td>Slider value for blood-vessel intesity</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>JSON: {mask: byte stream} mask as transparent PNG as byte stream</dd></dl>
<p>Example handling of return image stream in js: </p><pre class="fragment">fetch(RadiPOP_states.FLASK_SERVER+"/labelOrgan", {
    method: 'POST',
    headers: { 'Content-Type': 'application/json'},
    body: JSON.stringify(data)
})
.then(function(response){ return response.json();})   
.then(function(data){                      
bytestring = data["mask"];
img = bytestring.split('\'')[1]
</pre> 
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="afe63fea7be31b0200b496d08bc6b517d" name="afe63fea7be31b0200b496d08bc6b517d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe63fea7be31b0200b496d08bc6b517d">&#9670;&nbsp;</a></span>app</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">app = Flask(__name__)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a4cd10e2374b9aa7ea8f2257f38c46832" name="a4cd10e2374b9aa7ea8f2257f38c46832"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cd10e2374b9aa7ea8f2257f38c46832">&#9670;&nbsp;</a></span>FLASK_PORT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int FLASK_PORT = 4041</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a8351ace7b9efb5281c356be0ff739d2d" name="a8351ace7b9efb5281c356be0ff739d2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8351ace7b9efb5281c356be0ff739d2d">&#9670;&nbsp;</a></span>FLAST_HOST</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FLAST_HOST = '0.0.0.0'</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a832ddc04754e8a43d4f3c6165b1294a7" name="a832ddc04754e8a43d4f3c6165b1294a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a832ddc04754e8a43d4f3c6165b1294a7">&#9670;&nbsp;</a></span>host</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">host</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a65db06fedda325a1c6119e2e8ef4a558" name="a65db06fedda325a1c6119e2e8ef4a558"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65db06fedda325a1c6119e2e8ef4a558">&#9670;&nbsp;</a></span>patients</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dictionary patients = {}</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Dictionary which will hold for each patientID a RadiPopGUI object. </p>
<p >Patients are added by the API's /initialize function </p>

</div>
</div>
<a id="af8fb0f45ee0195c7422a49e6a8d72369" name="af8fb0f45ee0195c7422a49e6a8d72369"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8fb0f45ee0195c7422a49e6a8d72369">&#9670;&nbsp;</a></span>port</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">port</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
